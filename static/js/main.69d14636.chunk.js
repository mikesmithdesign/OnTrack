(this["webpackJsonptrain-app"]=this["webpackJsonptrain-app"]||[]).push([[0],{15:function(e,t,a){e.exports=a.p+"static/media/train.585577ad.svg"},31:function(e,t,a){e.exports=a.p+"static/media/marker.69e18b18.svg"},32:function(e,t,a){e.exports=a.p+"static/media/signpost.314ba61e.svg"},35:function(e,t,a){e.exports=a(67)},40:function(e,t,a){},41:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(30),c=a.n(r),s=a(6),i=a(7),o=a(9),m=a(8),d=a(10),u=(a(40),a(13)),E=(a(41),a(31)),p=a.n(E),f=a(32),v=a.n(f),g=a(15),h=a.n(g),N=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(o.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(l)))).handleClick=function(e){e.currentTarget.parentNode.querySelector(".locationList").classList.toggle("closed")},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.startPoint,a=e.endPoint,n=e.destinations,r=e.handleClose,c=e.handleClear;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"hero"},l.a.createElement("div",{className:"heroContent"},l.a.createElement("h1",{className:"animated fadeIn"},"OnTrack"),l.a.createElement("div",{className:"graphicContainer"},l.a.createElement("ul",null,l.a.createElement("li",{className:"animated fadeInDown"}),l.a.createElement("li",{className:"animated fadeInDown"}),l.a.createElement("li",{className:"animated fadeInDown"})),l.a.createElement("img",{src:h.a,alt:"",className:"animated fadeInDown"}),l.a.createElement("ul",null,l.a.createElement("li",{className:"animated fadeInDown"}),l.a.createElement("li",{className:"animated fadeInDown"}),l.a.createElement("li",{className:"animated fadeInDown"}))))),l.a.createElement("div",{className:"controls"},l.a.createElement("div",{className:"dropDownContainer animated fadeInUp",style:{zIndex:2}},l.a.createElement("div",{className:"locationBox",onClick:this.handleClick},l.a.createElement("p",null,t.location)," ",l.a.createElement("img",{src:p.a,alt:""})),l.a.createElement("ul",{className:"locationList closed"},n.map((function(e){return l.a.createElement("li",{onClick:r,key:e.crs,"data-location":e.location,"data-crs":e.crs,"data-point":"startPoint"},l.a.createElement("p",null,e.location),l.a.createElement("p",null,"(",e.crs,")"))})))),l.a.createElement("div",{className:"dropDownContainer animated  fadeInUp",style:{zIndex:1}},l.a.createElement("div",{className:"locationBox",onClick:this.handleClick}," ",l.a.createElement("p",null,a.location)," ",l.a.createElement("img",{src:v.a,alt:""})),l.a.createElement("ul",{className:"locationList closed"},n.map((function(e){return l.a.createElement("li",{onClick:r,key:e.crs,"data-location":e.location,"data-crs":e.crs,"data-point":"endPoint"},l.a.createElement("p",null,e.location),l.a.createElement("p",null,"(",e.crs,")"))})))),l.a.createElement("div",{className:"buttons"},l.a.createElement("button",{onClick:c,className:"animated fadeInUp"},"Clear"),l.a.createElement(u.b,{to:"times",className:"disabled animated fadeInUp"},l.a.createElement("button",null,"Go")))))}}]),t}(n.Component),b=a(19),P=a.n(b);a(64);var C=function(e){var t=e.delay,a=e.endPoint,n=e.item;return l.a.createElement("div",{className:"times"},l.a.createElement("div",{className:"departure"},"On time"!==n.etd?l.a.createElement("span",{className:"delayed"},l.a.createElement("p",null,n.etd),l.a.createElement("s",null,n.std)):l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,n.std),l.a.createElement("s",{className:"fade"},n.std))),l.a.createElement("div",{className:"dots"},l.a.createElement("ul",null,l.a.createElement("li",{className:"animated fadeInDown",style:{animationDelay:"".concat(.5+.15*t,"s")}}),l.a.createElement("li",{className:"animated fadeInDown",style:{animationDelay:"".concat(.55+.15*t,"s")}}),l.a.createElement("li",{className:"animated fadeInDown",style:{animationDelay:"".concat(.6+.15*t,"s")}}),l.a.createElement("li",{className:"animated fadeInDown",style:{animationDelay:"".concat(.65+.15*t,"s")}}),l.a.createElement("li",{className:"animated fadeInDown",style:{animationDelay:"".concat(.7+.15*t,"s")}}))),n.subsequentCallingPointsList[0].subsequentCallingPoints.filter((function(e){return e.crs===a.crs})).map((function(e){return l.a.createElement("div",{className:"arrival",key:n.serviceID},"On time"!==e.et?l.a.createElement("span",{className:"delayed"},l.a.createElement("p",null,e.et),l.a.createElement("s",null,e.st)):l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,e.st),l.a.createElement("s",{className:"fade"},e.st)))})))};var y=function(e){var t=e.item,a=e.arrivals,n=e.startPoint,r=e.endPoint;return l.a.createElement("div",{className:"location"},l.a.createElement("div",{className:"start"},l.a.createElement("p",null,n.crs," ",l.a.createElement("br",null),l.a.createElement("span",null,t.platform?"Platform ".concat(t.platform):"Platform --"))),l.a.createElement("div",{className:"time"},l.a.createElement("p",null,(new Date("01/01/2007 "+t.subsequentCallingPointsList[0].subsequentCallingPoints.filter((function(e){return e.crs===r.crs})).map((function(e){return function(){switch(e.et){case"On time":return e.st;default:return e.et}}()}))).getTime()-new Date("01/01/2007 "+function(){switch(t.etd){case"On time":return t.std;default:return t.etd}}()).getTime())/1e3/60,"m")),l.a.createElement("div",{className:"end"},l.a.createElement("p",null,r.crs," ",l.a.createElement("br",null),a.filter((function(e){return e.sta===function(e,t){for(var a=0;a<t.length;a++)if(t[a].crs===e)return t[a]}("CLJ",t.subsequentCallingPointsList[0].subsequentCallingPoints).st&&e.origin[0].locationName===t.origin[0].locationName})).map((function(e){return l.a.createElement("span",{key:t.serviceID},e.platform?"Platform ".concat(e.platform):"Platform --")})))))};var w=function(e){var t=e.item;return l.a.createElement("ul",{className:"callingPoints closed"},t.subsequentCallingPointsList[0].subsequentCallingPoints.slice(0,function(e,t){for(var a=0;a<t.length;a++)if(t[a].crs===e)return a+1}("CLJ",t.subsequentCallingPointsList[0].subsequentCallingPoints)).map((function(e){return l.a.createElement("li",{key:e.crs},l.a.createElement("p",null,e.locationName," "),"On time"!==e.et?l.a.createElement("span",{className:"delayed"},l.a.createElement("p",null,l.a.createElement("s",null,e.st)," ",e.et)):l.a.createElement("p",null,e.st))})))};var D=function(e){var t=e.item;return l.a.createElement("div",{className:"cardBottom"},l.a.createElement("p",null,l.a.createElement("span",{className:"operator"},t.operator," ")," service ",l.a.createElement("br",null),"from ",l.a.createElement("span",{className:"location"},t.origin[0].locationName)," to"," ",l.a.createElement("span",{className:"location"},t.subsequentCallingPointsList[0].subsequentCallingPoints[t.subsequentCallingPointsList[0].subsequentCallingPoints.length-1].locationName)," "),e.children)},I=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(o.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(l)))).state={trains:[],arrivals:[]},a.handleClick=function(e){e.target.classList.toggle("spin"),e.target.parentNode.parentNode.querySelector(".callingPoints").classList.toggle("closed")},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;P.a.get("https://api.departureboard.io/api/v2.0/getDeparturesByCRS/".concat(this.props.startPoint.crs,"/?apiKey=68eaf87e-6cc1-49ca-9e95-f8f1da42ac99&filterStation=").concat(this.props.endPoint.crs,"&numServices=5")).then((function(t){console.log(t.data.trainServices),e.setState({trains:t.data.trainServices})})).catch((function(e){return console.log(e)})),P.a.get("https://api.departureboard.io/api/v2.0/getArrivalsByCRS/".concat(this.props.endPoint.crs,"/?apiKey=68eaf87e-6cc1-49ca-9e95-f8f1da42ac99&timeOffset=20&filterStation=").concat(this.props.startPoint.crs,"&numServices=5")).then((function(t){console.log(t.data.trainServices),e.setState({arrivals:t.data.trainServices})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.trains,n=t.arrivals,r=this.props,c=r.startPoint,s=r.endPoint;return l.a.createElement("div",{className:"timesContainer"},l.a.createElement("ul",{className:"trainTimes"},a.map((function(t,a){return l.a.createElement("li",{key:t.serviceID,className:"animated fadeInUp",style:{animationDelay:"".concat(.4+.15*a,"s")}},l.a.createElement("div",{className:"cardTop"},l.a.createElement(C,{item:t,delay:a,endPoint:s}),l.a.createElement(y,{item:t,arrivals:n,endPoint:s,startPoint:c}),l.a.createElement(w,{item:t})),l.a.createElement(D,{item:t},l.a.createElement("button",{onClick:e.handleClick},"+")))}))))}}]),t}(n.Component);a(65);var O=function(e){var t=e.startPoint,a=e.endPoint;return l.a.createElement("header",null,l.a.createElement("div",{className:"headerLocation"},l.a.createElement("p",{className:"animated fadeIn"},t.location),l.a.createElement("p",{className:"animated fadeIn"},a.location)),l.a.createElement("div",{className:"headerCrs"},l.a.createElement("h2",{className:"animated fadeIn"},t.crs),l.a.createElement("div",{className:"graphicContainer"},l.a.createElement("ul",null,l.a.createElement("li",{className:"animated fadeInDown"}),l.a.createElement("li",{className:"animated fadeInDown"}),l.a.createElement("li",{className:"animated fadeInDown"})),l.a.createElement("img",{src:h.a,alt:"",className:"animated fadeInDown"}),l.a.createElement("ul",null,l.a.createElement("li",{className:"animated fadeInDown"}),l.a.createElement("li",{className:"animated fadeInDown"}),l.a.createElement("li",{className:"animated fadeInDown"}))),l.a.createElement("h2",{className:"animated fadeIn"},a.crs)))},k=(a(66),function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return l.a.createElement("footer",{className:"disabled fadeIn "},l.a.createElement(u.b,{to:"/"},l.a.createElement("button",null,"Back")))}}]),t}(n.Component));var j=function(e){var t=e.startPoint,a=e.endPoint;return l.a.createElement(l.a.Fragment,null,l.a.createElement(O,{startPoint:t,endPoint:a}),l.a.createElement(I,{startPoint:t,endPoint:a}),l.a.createElement(k,null))},L=a(11),S=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(o.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(l)))).state={startPoint:{crs:"",location:"From"},endPoint:{crs:"",location:"To"},destinations:[{crs:"EGH",location:"Egham"},{crs:"SNS",location:"Staines"},{crs:"CLJ",location:"Clapham Junction"},{crs:"WAT",location:"London Waterloo"}]},a.handleClose=function(e){e.currentTarget.parentNode.classList.add("closed"),e.currentTarget.parentNode.parentNode.classList.add("selected"),"startPoint"==e.currentTarget.getAttribute("data-point")?a.setState({startPoint:Object.assign({},a.state.startPoint,{crs:e.currentTarget.getAttribute("data-crs"),location:e.currentTarget.getAttribute("data-location")})}):a.setState({endPoint:Object.assign({},a.state.endPoint,{crs:e.currentTarget.getAttribute("data-crs"),location:e.currentTarget.getAttribute("data-location")})})},a.handleClear=function(){a.setState({startPoint:Object.assign({},a.state.startPoint,{crs:"",location:"From"}),endPoint:Object.assign({},a.state.endPoint,{crs:"",location:"To"})}),document.querySelectorAll(".dropDownContainer.selected").forEach((function(e){e.classList.remove("selected")}))},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(){""!=this.state.startPoint.crs&&""!=this.state.endPoint.crs&&document.querySelector("a").classList.contains("disabled")&&document.querySelector("a.disabled").classList.remove("disabled")}},{key:"render",value:function(){var e=this,t=this.state,a=t.startPoint,n=t.endPoint,r=t.destinations;return l.a.createElement("div",{className:"App"},l.a.createElement(u.a,null,l.a.createElement(L.a,{exact:!0,path:"/OnTrack/",render:function(t){return l.a.createElement(N,Object.assign({},t,{startPoint:a,endPoint:n,destinations:r,handleClose:e.handleClose,handleClear:e.handleClear}))}}),l.a.createElement(L.a,{exact:!0,path:"/OnTrack/times",render:function(e){return l.a.createElement(j,Object.assign({},e,{startPoint:a,endPoint:n}))}})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[35,1,2]]]);
//# sourceMappingURL=main.69d14636.chunk.js.map