(this["webpackJsonptrain-app"]=this["webpackJsonptrain-app"]||[]).push([[0],{15:function(e,t,a){e.exports=a.p+"static/media/train.585577ad.svg"},34:function(e,t,a){e.exports=a.p+"static/media/marker.69e18b18.svg"},35:function(e,t,a){e.exports=a.p+"static/media/signpost.314ba61e.svg"},39:function(e,t,a){e.exports=a(72)},44:function(e,t,a){},45:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(33),c=a.n(l),s=a(6),i=a(7),o=a(9),m=a(8),d=a(10),u=(a(44),a(13)),f=(a(45),a(34)),p=a.n(f),E=a(35),g=a.n(E),h=a(15),v=a.n(h);var b=function(){return r.a.createElement("div",{className:"hero"},r.a.createElement("div",{className:"heroContent"},r.a.createElement("h1",{className:"animated fadeIn"},"OnTrack"),r.a.createElement("div",{className:"graphicContainer"},r.a.createElement("ul",null,r.a.createElement("li",{className:"animated fadeInDown"}),r.a.createElement("li",{className:"animated fadeInDown"}),r.a.createElement("li",{className:"animated fadeInDown"})),r.a.createElement("img",{src:v.a,alt:"",className:"animated fadeInDown"}),r.a.createElement("ul",null,r.a.createElement("li",{className:"animated fadeInDown"}),r.a.createElement("li",{className:"animated fadeInDown"}),r.a.createElement("li",{className:"animated fadeInDown"})))))};var N=function(e){var t=e.location,a=e.icon,n=e.destinations,l=e.handleClose,c=e.handleClick,s=e.zIndex,i=e.delay,o=e.dataPoint;return r.a.createElement("div",{className:"dropDownContainer animated fadeInUp",style:{zIndex:s,animationDelay:i}},r.a.createElement("div",{className:"locationBox",onClick:c},r.a.createElement("p",null,t.location)," ",r.a.createElement("img",{src:a,alt:""})),r.a.createElement("ul",{className:"locationList closed"},n.map((function(e){return r.a.createElement("li",{onClick:l,key:e.crs,"data-location":e.location,"data-crs":e.crs,"data-point":o},r.a.createElement("p",null,e.location),r.a.createElement("p",null,"(",e.crs,")"))}))))},P=a(36),y=a(18);function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){Object(P.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var w=function(e){var t=e.offset,a=e.handleRangeChange;return r.a.createElement("div",{className:"when animated fadeInUp",style:{zIndex:1,animationDelay:".45s"}},r.a.createElement("label",{htmlFor:""},"When?"),r.a.createElement(y.Range,{step:1,min:0,max:120,values:t,onChange:function(e){return a(e)},renderTrack:function(e){var a=e.props,n=e.children;return r.a.createElement("div",Object.assign({},a,{style:O({},a.style,{height:"4px",width:"100%",background:Object(y.getTrackBackground)({values:t,colors:["#FF2897","rgba(255,255,255,.15)"],min:0,max:120})})}),n)},renderThumb:function(e){var a=e.props;e.isDragged;return r.a.createElement("div",Object.assign({},a,{style:O({},a.style,{height:"20px",width:"20px",borderRadius:"100%",backgroundColor:"#FFF",display:"flex",justifyContent:"center",alignItems:"center"})}),r.a.createElement("div",{style:{position:"absolute",bottom:"-20px",color:"#fff",fontWeight:"bold",fontSize:"14px"}},0===t[0]?"Now":t[0]+"m"))}}))},D=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(o.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(e){e.currentTarget.parentNode.querySelector(".locationList").classList.toggle("closed")},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.startPoint,a=e.endPoint,n=e.destinations,l=e.handleClose,c=e.handleClear,s=e.offset,i=e.handleRangeChange;return r.a.createElement(r.a.Fragment,null,r.a.createElement(b,null),r.a.createElement("div",{className:"controls"},r.a.createElement(N,{location:t,icon:p.a,destinations:n,handleClose:l,handleClick:this.handleClick,zIndex:2,delay:".25s",dataPoint:"startPoint"}),r.a.createElement(N,{location:a,icon:g.a,destinations:n,handleClose:l,handleClick:this.handleClick,zIndex:1,delay:".35s",dataPoint:"endPoint"}),r.a.createElement(w,{offset:s,handleRangeChange:i}),r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{onClick:c,className:"animated fadeInUp",style:{animationDelay:".55s"}},"Clear"),r.a.createElement(u.b,{to:"/OnTrack/Times",className:"disabled animated fadeInUp",style:{animationDelay:".6s"}},r.a.createElement("button",null,"Go")))))}}]),t}(n.Component),j=a(21),k=a.n(j);a(69);var I=function(e){var t=e.delay,a=e.endPoint,n=e.item;return r.a.createElement("div",{className:"times"},r.a.createElement("div",{className:"departure"},"On time"!==n.etd?r.a.createElement("span",{className:"delayed"},r.a.createElement("p",null,n.etd),r.a.createElement("s",null,n.std)):r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,n.std),r.a.createElement("s",{className:"fade"},n.std))),r.a.createElement("div",{className:"dots"},r.a.createElement("ul",null,r.a.createElement("li",{className:"animated fadeInDown",style:{animationDelay:"".concat(.5+.15*t,"s")}}),r.a.createElement("li",{className:"animated fadeInDown",style:{animationDelay:"".concat(.55+.15*t,"s")}}),r.a.createElement("li",{className:"animated fadeInDown",style:{animationDelay:"".concat(.6+.15*t,"s")}}),r.a.createElement("li",{className:"animated fadeInDown",style:{animationDelay:"".concat(.65+.15*t,"s")}}),r.a.createElement("li",{className:"animated fadeInDown",style:{animationDelay:"".concat(.7+.15*t,"s")}}))),n.subsequentCallingPointsList[0].subsequentCallingPoints.filter((function(e){return e.crs===a.crs})).map((function(e){return r.a.createElement("div",{className:"arrival",key:n.serviceID},"On time"!==e.et?r.a.createElement("span",{className:"delayed"},r.a.createElement("p",null,e.et),r.a.createElement("s",null,e.st)):r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,e.st),r.a.createElement("s",{className:"fade"},e.st)))})))};var S=function(e){var t=e.item,a=e.arrivals,n=e.startPoint,l=e.endPoint;return r.a.createElement("div",{className:"location"},r.a.createElement("div",{className:"start"},r.a.createElement("p",null,n.crs," ",r.a.createElement("br",null),r.a.createElement("span",null,t.platform?"Platform ".concat(t.platform):"Platform --"))),r.a.createElement("div",{className:"time"},r.a.createElement("p",null,isNaN((new Date("01/01/2007 "+t.subsequentCallingPointsList[0].subsequentCallingPoints.filter((function(e){return e.crs===l.crs})).map((function(e){return function(){switch(e.et){case"On time":return e.st;default:return e.et}}()}))).getTime()-new Date("01/01/2007 "+function(){switch(t.etd){case"On time":return t.std;default:return t.etd}}()).getTime())/1e3/60)?"NA":(new Date("01/01/2007 "+t.subsequentCallingPointsList[0].subsequentCallingPoints.filter((function(e){return e.crs===l.crs})).map((function(e){return function(){switch(e.et){case"On time":return e.st;default:return e.et}}()}))).getTime()-new Date("01/01/2007 "+function(){switch(t.etd){case"On time":return t.std;default:return t.etd}}()).getTime())/1e3/60,"m")),r.a.createElement("div",{className:"end"},r.a.createElement("p",null,l.crs," ",r.a.createElement("br",null),a.filter((function(e){return e.sta===function(e,t){for(var a=0;a<t.length;a++)if(t[a].crs===e)return t[a]}("".concat(l.crs),t.subsequentCallingPointsList[0].subsequentCallingPoints).st&&e.origin[0].locationName===t.origin[0].locationName})).map((function(e){return r.a.createElement("span",{key:t.serviceID},e.platform?"Platform ".concat(e.platform):"Platform --")})))))};var T=function(e){var t=e.item,a=e.endPoint;return r.a.createElement("ul",{className:"callingPoints closed"},t.subsequentCallingPointsList[0].subsequentCallingPoints.slice(0,function(e,t){for(var a=0;a<t.length;a++)if(t[a].crs===e)return a+1}("".concat(a.crs),t.subsequentCallingPointsList[0].subsequentCallingPoints)).map((function(e){return r.a.createElement("li",{key:e.crs},r.a.createElement("p",null,e.locationName," "),"On time"!==e.et?r.a.createElement("span",{className:"delayed"},r.a.createElement("p",null,r.a.createElement("s",null,e.st)," ",e.et)):r.a.createElement("p",null,e.st))})))};var L=function(e){var t=e.item;return r.a.createElement("div",{className:"cardBottom"},r.a.createElement("p",null,r.a.createElement("span",{className:"operator"},t.operator," ")," service ",r.a.createElement("br",null),"from ",r.a.createElement("span",{className:"location"},t.origin[0].locationName)," to"," ",r.a.createElement("span",{className:"location"},t.subsequentCallingPointsList[0].subsequentCallingPoints[t.subsequentCallingPointsList[0].subsequentCallingPoints.length-1].locationName)," "),e.children)},q=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(o.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={trains:[],arrivals:[]},a.handleClick=function(e){e.target.classList.toggle("spin"),e.target.parentNode.parentNode.querySelector(".callingPoints").classList.toggle("closed")},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;k.a.get("https://api.departureboard.io/api/v2.0/getDeparturesByCRS/".concat(this.props.startPoint.crs,"/?apiKey=68eaf87e-6cc1-49ca-9e95-f8f1da42ac99&timeOffset=").concat(this.props.offset,"&filterStation=").concat(this.props.endPoint.crs,"&numServices=5")).then((function(t){console.log(t.data.trainServices),e.setState({trains:t.data.trainServices})})).catch((function(e){return console.log(e)})),k.a.get("https://api.departureboard.io/api/v2.0/getArrivalsByCRS/".concat(this.props.endPoint.crs,"/?apiKey=68eaf87e-6cc1-49ca-9e95-f8f1da42ac99&timeOffset=").concat(this.props.offset+20,"&filterStation=").concat(this.props.startPoint.crs,"&numServices=5")).then((function(t){console.log(t.data.trainServices),e.setState({arrivals:t.data.trainServices})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.trains,n=t.arrivals,l=this.props,c=l.startPoint,s=l.endPoint;return r.a.createElement("div",{className:"timesContainer"},r.a.createElement("ul",{className:"trainTimes"},null!==a?a.map((function(t,a){return r.a.createElement("li",{key:t.serviceID,className:"animated fadeInUp",style:{animationDelay:"".concat(.4+.15*a,"s")}},r.a.createElement("div",{className:"cardTop"},r.a.createElement(I,{item:t,delay:a,endPoint:s}),r.a.createElement(S,{item:t,arrivals:n,endPoint:s,startPoint:c}),r.a.createElement(T,{item:t,endPoint:s})),r.a.createElement(L,{item:t},r.a.createElement("button",{onClick:e.handleClick},"+")))})):"No results"))}}]),t}(n.Component);a(70);var x=function(e){var t=e.startPoint,a=e.endPoint;return r.a.createElement("header",null,r.a.createElement("div",{className:"headerLocation"},r.a.createElement("p",{className:"animated fadeIn"},t.location),r.a.createElement("p",{className:"animated fadeIn"},a.location)),r.a.createElement("div",{className:"headerCrs"},r.a.createElement("h2",{className:"animated fadeIn"},t.crs),r.a.createElement("div",{className:"graphicContainer"},r.a.createElement("ul",null,r.a.createElement("li",{className:"animated fadeInDown"}),r.a.createElement("li",{className:"animated fadeInDown"}),r.a.createElement("li",{className:"animated fadeInDown"})),r.a.createElement("img",{src:v.a,alt:"",className:"animated fadeInDown"}),r.a.createElement("ul",null,r.a.createElement("li",{className:"animated fadeInDown"}),r.a.createElement("li",{className:"animated fadeInDown"}),r.a.createElement("li",{className:"animated fadeInDown"}))),r.a.createElement("h2",{className:"animated fadeIn"},a.crs)))},A=(a(71),function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("footer",{className:"disabled fadeIn "},r.a.createElement(u.b,{to:"/OnTrack/"},r.a.createElement("button",null,"Back")))}}]),t}(n.Component));var F=function(e){var t=e.startPoint,a=e.endPoint,n=e.offset;return r.a.createElement(r.a.Fragment,null,r.a.createElement(x,{startPoint:t,endPoint:a}),r.a.createElement(q,{startPoint:t,endPoint:a,offset:n}),r.a.createElement(A,null))},R=a(11),B=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(o.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={startPoint:{crs:"",location:"From"},endPoint:{crs:"",location:"To"},destinations:[{crs:"EGH",location:"Egham"},{crs:"SNS",location:"Staines"},{crs:"CLJ",location:"Clapham Junction"},{crs:"WAT",location:"London Waterloo"},{crs:"YAL",location:"Yalding"}],offset:[20]},a.handleClose=function(e){e.currentTarget.parentNode.classList.add("closed"),e.currentTarget.parentNode.parentNode.classList.add("selected"),"startPoint"===e.currentTarget.getAttribute("data-point")?a.setState({startPoint:Object.assign({},a.state.startPoint,{crs:e.currentTarget.getAttribute("data-crs"),location:e.currentTarget.getAttribute("data-location")})}):a.setState({endPoint:Object.assign({},a.state.endPoint,{crs:e.currentTarget.getAttribute("data-crs"),location:e.currentTarget.getAttribute("data-location")})})},a.handleClear=function(){a.setState({startPoint:Object.assign({},a.state.startPoint,{crs:"",location:"From"}),endPoint:Object.assign({},a.state.endPoint,{crs:"",location:"To"})}),document.querySelectorAll(".dropDownContainer.selected").forEach((function(e){e.classList.remove("selected")}))},a.handleRangeChange=function(e){a.setState({offset:e}),console.log(a.state.offset)},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(){""!==this.state.startPoint.crs&&""!==this.state.endPoint.crs&&document.querySelector("a").classList.contains("disabled")&&document.querySelector("a.disabled").classList.remove("disabled")}},{key:"render",value:function(){var e=this,t=this.state,a=t.startPoint,n=t.endPoint,l=t.destinations,c=t.offset;return r.a.createElement("div",{className:"App"},r.a.createElement(u.a,null,r.a.createElement(R.a,{exact:!0,path:"/OnTrack/",render:function(t){return r.a.createElement(D,Object.assign({},t,{startPoint:a,endPoint:n,offset:c,destinations:l,handleClose:e.handleClose,handleClear:e.handleClear,handleRangeChange:e.handleRangeChange}))}}),r.a.createElement(R.a,{exact:!0,path:"/OnTrack/Times",render:function(e){return r.a.createElement(F,Object.assign({},e,{startPoint:a,endPoint:n,offset:c}))}})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[39,1,2]]]);
//# sourceMappingURL=main.ac7170cd.chunk.js.map